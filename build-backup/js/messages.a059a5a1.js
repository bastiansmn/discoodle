(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["messages"],{"597b":function(t,e,o){},8862:function(t,e,o){},da76:function(t,e,o){"use strict";o("8862")},eaad:function(t,e,o){"use strict";o.r(e);o("99af");var n=o("7a23"),i=function(t){return Object(n["B"])("data-v-4da9e312"),t=t(),Object(n["z"])(),t},c={key:0,class:"Messages"},s={class:"left-pannel"},r={class:"settings-box"},a=i((function(){return Object(n["j"])("img",{src:"../assets/settings.png",alt:"Settings",style:{height:"100%",width:"100%"}},null,-1)})),u=[a],l=i((function(){return Object(n["j"])("img",{src:"../assets/arrow.svg",alt:"",style:{width:"70%"}},null,-1)})),d={class:"convs-list"},m={class:"link-content"},p={class:"user-logo"},b=["src"],j={key:1,src:"../assets/group.svg",alt:"",style:{width:"65%"}},f={key:2},g={class:"conv-name"},O=["onClick"],v=i((function(){return Object(n["j"])("img",{src:"../assets/pen.svg",alt:"",style:{width:"60%"}},null,-1)})),h=[v],y=i((function(){return Object(n["j"])("span",{style:{"margin-bottom":"10px","font-size":"19px","font-weight":"600",color:"#454150"}},"Modifier la discussion :",-1)})),_=Object(n["l"])("Modifier le nom de la room."),w={style:{display:"flex","flex-direction":"column","justify-content":"space-between","margin-top":"10px"}},k={class:"right-pannel"};function C(t,e,o,i,a,v){var C=Object(n["G"])("AddConversation"),R=Object(n["G"])("router-link"),U=Object(n["G"])("w-input"),E=Object(n["G"])("w-dialog"),x=Object(n["G"])("router-view"),A=Object(n["G"])("Account");return JSON.stringify(t.getUser)!==JSON.stringify({})?(Object(n["y"])(),Object(n["i"])("div",c,[Object(n["j"])("div",s,[Object(n["j"])("div",r,[Object(n["j"])("div",null,[Object(n["j"])("div",{class:"add-conversation",onClick:e[0]||(e[0]=function(t){return a.showPopUp=!0})}," + "),a.showPopUp?(Object(n["y"])(),Object(n["g"])(C,{key:0,onGroupAdded:v.addNewRoom,onDesactivatePopUp:e[1]||(e[1]=function(t){return a.showPopUp=!1})},null,8,["onGroupAdded"])):Object(n["h"])("",!0),JSON.stringify(t.$route.params)===JSON.stringify({})?(Object(n["y"])(),Object(n["i"])("a",{key:1,class:"settings",style:Object(n["u"])(a.modifying?{animation:"10s cubic-bezier(.11, 0, .09, 1) settingsRoll"}:{}),href:"#/messages",onClick:e[2]||(e[2]=function(t){a.modifying=!a.modifying})},u,4)):(Object(n["y"])(),Object(n["g"])(R,{key:2,to:"/messages",style:{width:"40px",height:"40px",display:"flex","align-items":"center","justify-content":"center","background-color":"transparent !important"}},{default:Object(n["R"])((function(){return[l]})),_:1}))])]),Object(n["j"])("div",d,[(Object(n["y"])(!0),Object(n["i"])(n["a"],null,Object(n["E"])(a.convList,(function(o){return Object(n["y"])(),Object(n["g"])(R,{key:o.room_id,to:a.modifying?"/messages":"/messages/".concat(o.room_id,"?name=").concat(o.room_name),onClick:function(e){return a.modifying?"":t.setConvUUID(o.room_id)},style:Object(n["u"])(a.modifying?{backgroundColor:"#15131c !important"}:{})},{default:Object(n["R"])((function(){return[Object(n["j"])("div",m,[Object(n["j"])("div",p,[null!==o.link_picture?(Object(n["y"])(),Object(n["i"])("img",{key:0,src:o.link_picture,alt:""},null,8,b)):o.users.length>2?(Object(n["y"])(),Object(n["i"])("img",j)):(Object(n["y"])(),Object(n["i"])("span",f,Object(n["K"])(o.room_name.charAt(0).toUpperCase()),1))]),Object(n["j"])("div",g,Object(n["K"])(o.room_name),1),a.modifying?(Object(n["y"])(),Object(n["i"])("button",{key:0,class:"edit-button",onClick:function(e){a.editRoom.show=!a.editRoom.show,a.new_name="",t.setConvUUID(o.room_id)}},h,8,O)):Object(n["h"])("",!0),Object(n["m"])(E,{modelValue:a.editRoom.show,"onUpdate:modelValue":e[7]||(e[7]=function(t){return a.editRoom.show=t}),fullscreen:a.editRoom.fullscreen,width:a.editRoom.width,persistent:a.editRoom.persistent,"persistent-no-animation":a.editRoom.persistentNoAnimation},{default:Object(n["R"])((function(){return[Object(n["j"])("div",null,[y,Object(n["m"])(U,{color:"primary-dark2",minlength:1,modelValue:a.new_name,"onUpdate:modelValue":e[3]||(e[3]=function(t){return a.new_name=t})},{default:Object(n["R"])((function(){return[_]})),_:1},8,["modelValue"]),Object(n["j"])("div",w,[Object(n["j"])("button",{class:"submit",onClick:e[4]||(e[4]=function(){return v.deleteRoom&&v.deleteRoom.apply(v,arguments)}),style:{"background-color":"#E85C5C !important"}}," Supprimer "),Object(n["j"])("button",{class:"submit",onClick:e[5]||(e[5]=function(){return v.exitRoom&&v.exitRoom.apply(v,arguments)}),style:{"background-color":"#E85C5C !important"}}," Quitter la conversation "),Object(n["j"])("button",{class:"submit",onClick:e[6]||(e[6]=function(){return v.roomEdit&&v.roomEdit.apply(v,arguments)})}," Enregistrer ")])])]})),_:1},8,["modelValue","fullscreen","width","persistent","persistent-no-animation"])])]})),_:2},1032,["to","onClick","style"])})),128))])]),Object(n["j"])("div",k,[Object(n["m"])(x,{onUserChanged:v.getRoomsFromDB},null,8,["onUserChanged"])])])):(Object(n["y"])(),Object(n["g"])(A,{key:1,onLogSuccess:v.getRoomsFromDB},null,8,["onLogSuccess"]))}var R=o("5530"),U=(o("d81d"),o("4de4"),o("5502")),E=o("bc3a"),x=o.n(E),A=o("77be"),N={class:"add-conv-box"},S=Object(n["l"])(" CrÃ©er une nouvelle discussion ici : ");function L(t,e,o,i,c,s){return Object(n["y"])(),Object(n["i"])("div",{class:"AddConversation",onClick:e[3]||(e[3]=function(){return s.clickEvent&&s.clickEvent.apply(s,arguments)})},[Object(n["j"])("div",N,[S,Object(n["j"])("div",null,[Object(n["j"])("input",{type:"text",placeholder:"Entrez un nom de conversation...",autocomplete:"off",name:"name_room",onKeypress:e[0]||(e[0]=function(){return s.isEnter&&s.isEnter.apply(s,arguments)})},null,32),Object(n["j"])("button",{onClick:e[1]||(e[1]=function(){return s.isEnter&&s.isEnter.apply(s,arguments)})}," + ")]),Object(n["j"])("button",{class:"closePopUp",onClick:e[2]||(e[2]=function(e){return t.$emit("desactivatePopUp")})}," X ")])])}var P={name:"AddConversation",computed:Object(R["a"])({},Object(U["c"])(["getUser"])),methods:{isEnter:function(t){var e=document.querySelector("input[name=name_room]").value;(13===t.keyCode&&""!==e.value||"click"===t.type)&&this.addRoom(name)},clickEvent:function(t){"AddConversation"===t.target.className&&this.$emit("desactivatePopUp")},addRoom:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.querySelector(".add-conv-box > div > input").value;x.a.post("http://localhost:8080/api/rooms/addNewRoom",{room_name:o,room_members:[this.getUser.id],link_picture:null}).then((function(t){e.$emit("groupAdded",t.data),e.$emit("desactivatePopUp")})).catch((function(t){console.log(t.response),e.$emit("desactivatePopUp")}))}}},D=(o("da76"),o("6b0d")),G=o.n(D);const J=G()(P,[["render",L],["__scopeId","data-v-3aabd332"]]);var V=J,$={name:"Messages",components:{AddConversation:V,Account:A["default"]},computed:Object(R["a"])({},Object(U["c"])(["getColors","getUser","getCurrentConv"])),methods:Object(R["a"])(Object(R["a"])({},Object(U["b"])(["setConvUUID"])),{},{getRoomsFromDB:function(){var t=this;x.a.get("http://localhost:8080/api/users/seeAllRooms?user_id=".concat(this.getUser.id)).then((function(e){t.convList=e.data}))},addNewRoom:function(t){this.convList.unshift({link_picture:t.link_picture,room_name:t.room_name,room_id:t.room_id,users:t.users})},roomEdit:function(){var t=this;if(""!==this.new_name){var e=this.getCurrentConv;x.a.put("http://localhost:8080/api/rooms/renameRoom?room_id=".concat(e,"&new_name=").concat(this.new_name)).then((function(){t.convList.filter((function(t){return t.room_id===e})).map((function(e){return e.room_name=t.new_name})),t.editRoom.show=!1,t.modifying=!1}))}},deleteRoom:function(){var t=this,e=this.getCurrentConv;x.a.delete("http://localhost:8080/api/rooms/removeRoom?room_id=".concat(e)).then((function(){t.convList=t.convList.filter((function(t){return t.room_id!==e})),t.editRoom.show=!1,t.modifying=!1}))},exitRoom:function(){var t=this,e=this.getCurrentConv;x.a.delete("http://localhost:8080/api/rooms/removeMember?room_id=".concat(e,"&user_id=").concat(this.getUser.id)).then((function(){t.convList=t.convList.filter((function(t){return t.room_id!==e})),t.editRoom.show=!1,t.modifying=!1}))}}),data:function(){return{convList:[],displayConversationPopUp:!1,showPopUp:!1,modifying:!1,editRoom:{show:!1,fullscreen:!1,persistent:!1,persistentNoAnimation:!1,width:300},new_name:""}},mounted:function(){JSON.stringify(this.getUser)!==JSON.stringify({})&&this.getRoomsFromDB()}};o("f6d3");const B=G()($,[["render",C],["__scopeId","data-v-4da9e312"]]);e["default"]=B},f6d3:function(t,e,o){"use strict";o("597b")}}]);
//# sourceMappingURL=messages.a059a5a1.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["messages/friends"],{2532:function(t,e,n){"use strict";var i=n("23e7"),r=n("5a34"),a=n("1d80"),c=n("577e"),s=n("ab13");i({target:"String",proto:!0,forced:!s("includes")},{includes:function(t){return!!~c(a(this)).indexOf(c(r(t)),arguments.length>1?arguments[1]:void 0)}})},"313c":function(t,e,n){"use strict";n("5af9")},"44e7":function(t,e,n){var i=n("861d"),r=n("c6b6"),a=n("b622"),c=a("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[c])?!!e:"RegExp"==r(t))}},"4cbc":function(t,e,n){},"5a34":function(t,e,n){var i=n("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5af9":function(t,e,n){},"8aef":function(t,e,n){"use strict";n("4de4"),n("caad"),n("2532"),n("d81d");var i=n("7a23"),r={class:"content"},a=Object(i["l"])(" Quel(s) utilisateur(s) voulez-vous ajouter ? "),c={class:"users"},s={style:{width:"calc(100% - 85px)"}},o=["onClick"],u={class:"input-user"},d={key:0,id:"friends-list"},l=["value"];function f(t,e,n,f,h,p){return Object(i["y"])(),Object(i["i"])("div",{class:"AddUserInConv",onClick:e[4]||(e[4]=function(){return p.clickEvent&&p.clickEvent.apply(p,arguments)})},[Object(i["j"])("div",r,[a,Object(i["j"])("div",c,[(Object(i["y"])(!0),Object(i["i"])(i["a"],null,Object(i["E"])(h.usersToAdd,(function(t){return Object(i["y"])(),Object(i["i"])("div",{key:t,class:"userInfo"},[Object(i["j"])("div",null,Object(i["K"])(null===t||void 0===t?void 0:t.charAt(0).toUpperCase()),1),Object(i["j"])("span",s,Object(i["K"])(t),1),Object(i["j"])("button",{class:"close",onClick:function(e){return p.removeUser(t)}},"X",8,o)])})),128))]),Object(i["j"])("div",u,[Object(i["j"])("input",{type:"text",placeholder:"Entrez un nom d'utilisateur...",autocomplete:"off",list:"friends-list",name:"name_room",onKeypress:e[0]||(e[0]=function(){return p.isEnter&&p.isEnter.apply(p,arguments)})},null,32),n.showAutocomplete?(Object(i["y"])(),Object(i["i"])("datalist",d,[(Object(i["y"])(!0),Object(i["i"])(i["a"],null,Object(i["E"])(t.getFriends.filter((function(t){return!h.users.map((function(t){return t.username})).includes(t.username)})),(function(t){return Object(i["y"])(),Object(i["i"])("option",{key:t.id,value:t.username},null,8,l)})),128))])):Object(i["h"])("",!0),Object(i["j"])("button",{onClick:e[1]||(e[1]=function(){return p.addUser&&p.addUser.apply(p,arguments)})}," + ")]),Object(i["j"])("button",{class:"submit",onClick:e[2]||(e[2]=function(e){t.$emit("addUsers",h.usersToAdd)})}," Ajouter les utilisateurs séléctionnés ! "),Object(i["j"])("button",{class:"closePopUp",onClick:e[3]||(e[3]=function(e){return t.$emit("desactivatePopUp")})}," X ")])])}var h=n("5530"),p=n("5502"),b=n("bc3a"),j=n.n(b),v={name:"AddUserInConv",props:{showAutocomplete:{required:!0,type:Boolean}},methods:{clickEvent:function(t){"AddUserInConv"===t.target.className&&this.$emit("desactivatePopUp")},addUser:function(){var t=document.querySelector(".input-user > input").value;""===t||this.usersToAdd.includes(t)||this.usersToAdd.push(t),document.querySelector(".input-user > input").value=""},removeUser:function(t){this.usersToAdd=this.usersToAdd.filter((function(e){return e!==t}))},isEnter:function(t){13===t.keyCode&&this.addUser()}},data:function(){return{usersToAdd:[],users:[]}},computed:Object(h["a"])({},Object(p["c"])(["getFriends","getCurrentConv"])),mounted:function(){var t=this;""!==this.getCurrentConv&&j.a.get("http://localhost:8080/api/rooms/findUserOfRoom?room_id=".concat(this.getCurrentConv)).then((function(e){t.users=e.data}))}},m=(n("313c"),n("6b0d")),O=n.n(m);const g=O()(v,[["render",f],["__scopeId","data-v-3c37375c"]]);e["a"]=g},"99af":function(t,e,n){"use strict";var i=n("23e7"),r=n("d039"),a=n("e8b5"),c=n("861d"),s=n("7b0b"),o=n("50c4"),u=n("8418"),d=n("65f0"),l=n("1dde"),f=n("b622"),h=n("2d00"),p=f("isConcatSpreadable"),b=9007199254740991,j="Maximum allowed index exceeded",v=h>=51||!r((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),m=l("concat"),O=function(t){if(!c(t))return!1;var e=t[p];return void 0!==e?!!e:a(t)},g=!v||!m;i({target:"Array",proto:!0,forced:g},{concat:function(t){var e,n,i,r,a,c=s(this),l=d(c,0),f=0;for(e=-1,i=arguments.length;e<i;e++)if(a=-1===e?c:arguments[e],O(a)){if(r=o(a.length),f+r>b)throw TypeError(j);for(n=0;n<r;n++,f++)n in a&&u(l,f,a[n])}else{if(f>=b)throw TypeError(j);u(l,f++,a)}return l.length=f,l}})},a434:function(t,e,n){"use strict";var i=n("23e7"),r=n("23cb"),a=n("a691"),c=n("50c4"),s=n("7b0b"),o=n("65f0"),u=n("8418"),d=n("1dde"),l=d("splice"),f=Math.max,h=Math.min,p=9007199254740991,b="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!l},{splice:function(t,e){var n,i,d,l,j,v,m=s(this),O=c(m.length),g=r(t,O),y=arguments.length;if(0===y?n=i=0:1===y?(n=0,i=O-g):(n=y-2,i=h(f(a(e),0),O-g)),O+n-i>p)throw TypeError(b);for(d=o(m,i),l=0;l<i;l++)j=g+l,j in m&&u(d,l,m[j]);if(d.length=i,n<i){for(l=g;l<O-i;l++)j=l+i,v=l+n,j in m?m[v]=m[j]:delete m[v];for(l=O;l>O-i+n;l--)delete m[l-1]}else if(n>i)for(l=O-i;l>g;l--)j=l+i-1,v=l+n-1,j in m?m[v]=m[j]:delete m[v];for(l=0;l<n;l++)m[l+g]=arguments[l+2];return m.length=O-i+n,d}})},ab13:function(t,e,n){var i=n("b622"),r=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(i){}}return!1}},b0c0:function(t,e,n){var i=n("83ab"),r=n("5e77").EXISTS,a=n("9bf2").f,c=Function.prototype,s=c.toString,o=/^\s*function ([^ (]*)/,u="name";i&&!r&&a(c,u,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(t){return""}}})},c421:function(t,e,n){"use strict";n.r(e);n("b0c0");var i=n("7a23"),r=function(t){return Object(i["B"])("data-v-1e13af17"),t=t(),Object(i["z"])(),t},a={class:"FriendsList"},c={class:"pannel"},s=r((function(){return Object(i["j"])("span",{style:{"font-weight":"600","font-size":"14px",color:"#f4f4f4",width:"100%",height:"30px","justify-self":"flex-start",display:"flex","align-items":"center"}},"Ajouter un ami",-1)})),o={key:0,class:"incoming-invite"},u=r((function(){return Object(i["j"])("span",{style:{"margin-bottom":"10px","font-weight":"600","font-size":"14px",color:"#f4f4f4"}},"Ils m'ont demandé en ami :",-1)})),d={class:"user-image"},l={key:0},f=["src"],h={style:{color:"#f4f4f4",width:"85%","font-size":"19px","font-weight":"600"}},p=["onClick"],b=["onClick"],j={class:"current-friends"},v={key:0,style:{"font-weight":"600","font-size":"17px",color:"#f4f4f4"}},m={key:1,style:{"margin-bottom":"10px","font-weight":"600","font-size":"17px",color:"#f4f4f4"}},O={class:"user-image"},g={key:0},y=["src"],_={style:{color:"#f4f4f4",width:"calc(100% - 50px)","font-size":"19px","font-weight":"600"}};function k(t,e,n,r,k,A){var w=Object(i["G"])("AddUserInConv"),U=Object(i["G"])("w-alert");return Object(i["y"])(),Object(i["i"])(i["a"],null,[Object(i["j"])("div",a,[Object(i["j"])("div",c,[s,Object(i["j"])("button",{onClick:e[0]||(e[0]=function(t){return k.showAddFriends=!0})},"+"),k.showAddFriends?(Object(i["y"])(),Object(i["g"])(w,{key:0,onDesactivatePopUp:e[1]||(e[1]=function(t){return k.showAddFriends=!1}),onAddUsers:A.addUsers,"show-autocomplete":!1},null,8,["onAddUsers"])):Object(i["h"])("",!0)]),k.invite.length>0?(Object(i["y"])(),Object(i["i"])("div",o,[u,(Object(i["y"])(!0),Object(i["i"])(i["a"],null,Object(i["E"])(k.invite,(function(t){return Object(i["y"])(),Object(i["i"])("div",{class:"user",key:t},[Object(i["j"])("div",d,[null===t.link_to_avatar?(Object(i["y"])(),Object(i["i"])("span",l,Object(i["K"])(t.name.charAt(0).toUpperCase()),1)):(Object(i["y"])(),Object(i["i"])("img",{key:1,src:t.link_to_avatar,alt:""},null,8,f))]),Object(i["j"])("span",h,Object(i["K"])(t.name),1),Object(i["j"])("button",{class:"accept-invite",onClick:function(e){return A.acceptInvite(t.id)}},"✅",8,p),Object(i["j"])("button",{class:"refuse-invite",onClick:function(e){return A.refuseInvite(t.id)}},"❌",8,b)])})),128))])):Object(i["h"])("",!0),Object(i["j"])("div",j,[0===t.getFriends.length?(Object(i["y"])(),Object(i["i"])("span",v,"Ajoute des amis pour les voir ici !")):(Object(i["y"])(),Object(i["i"])("span",m,"Vos amis :")),(Object(i["y"])(!0),Object(i["i"])(i["a"],null,Object(i["E"])(t.getFriends,(function(t){return Object(i["y"])(),Object(i["i"])("div",{class:"user",key:t},[Object(i["j"])("div",O,[null===t.link_to_avatar?(Object(i["y"])(),Object(i["i"])("span",g,Object(i["K"])(t.name.charAt(0).toUpperCase()),1)):(Object(i["y"])(),Object(i["i"])("img",{key:1,src:t.link_to_avatar,alt:""},null,8,y))]),Object(i["j"])("span",_,Object(i["K"])(t.name),1)])})),128))])]),k.showAlert?(Object(i["y"])(),Object(i["g"])(U,{key:0,class:"error-alert",success:"",plain:""},{default:Object(i["R"])((function(){return[Object(i["l"])(Object(i["K"])(k.alertText),1)]})),_:1})):Object(i["h"])("",!0)],64)}var A=n("5530"),w=(n("159b"),n("99af"),n("a434"),n("caad"),n("2532"),n("5502")),U=n("bc3a"),x=n.n(U),C=n("8aef"),E={name:"FriendsList",components:{AddUserInConv:C["a"]},data:function(){return{invite:[],alertText:"",showAlert:!1,showAddFriends:!1}},methods:Object(A["a"])({addUsers:function(t){var e=this;t.forEach((function(t){x.a.get("http://localhost:8080/api/users/findByUserName?username=".concat(t)).then((function(t){t.data&&t.data.id!==e.getUser.id&&x.a.post("http://localhost:8080/api/friendships/inviteMembers?user_id=".concat(e.getUser.id),{friendships:[t.data.id]}).then((function(){e.alertText="Utilisateur(s) ajouté(s)",e.showAlert=!0,setTimeout((function(){e.showAlert=!1}),4e3)}))}))})),this.showAddFriends=!1},acceptInvite:function(t){var e=this;x.a.put("http://localhost:8080/api/friendships/acceptInvitation?sender_id=".concat(t,"&receiver_id=").concat(this.getUser.id)).then((function(){x.a.get("http://localhost:8080/api/users/infos?user_id=".concat(t)).then((function(t){var n={id:t.data.id,username:t.data.username,name:t.data.name,link_to_avatar:t.data.link_to_avatar},i=0;e.invite.forEach((function(t){t.id!==n.id?i++:e.invite.splice(i,1)})),e.friendsIncludes(n)||e.getFriends.push(n)}))})).catch((function(t){console.log(t)}))},refuseInvite:function(t){var e=this;x.a.delete("http://localhost:8080/api/friendships/refuseInvitation?sender_id=".concat(t,"&receiver_id=").concat(this.getUser.id)).then((function(){x.a.get("http://localhost:8080/api/users/infos?user_id=".concat(t)).then((function(t){var n={id:t.data.id,username:t.data.username,name:t.data.name,link_to_avatar:t.data.link_to_avatar},i=0;e.invite.forEach((function(t){t.id!==n.id?i++:e.invite.splice(i,1)}))}))})).catch((function(t){console.log(t)}))},friendsIncludes:function(t){var e=!1;return this.getFriends.forEach((function(n){n.id===t.id&&n.link_to_avatar===t.link_to_avatar&&n.name===t.name&&n.username===t.username&&(e=!0)})),e}},Object(w["b"])(["setFriends"])),computed:Object(A["a"])({},Object(w["c"])(["getUser","getFriends","getCurrentConv"])),mounted:function(){var t=this;JSON.stringify(this.getUser)!==JSON.stringify({})&&(x.a.get("http://localhost:8080/api/friendships/getAllInvitations?user_id=".concat(this.getUser.id)).then((function(e){e.data.forEach((function(e){e.status||x.a.get("http://localhost:8080/api/users/infos?user_id=".concat(e.sender_id)).then((function(e){var n={id:e.data.id,username:e.data.username,name:e.data.name,link_to_avatar:e.data.link_to_avatar};t.invite.includes(n)||t.invite.push(n)}))}))})),x.a.get("http://localhost:8080/api/users/seeAllFriends?user_id=".concat(this.getUser.id)).then((function(e){t.setFriends([]),e.data.forEach((function(e){var n={id:e.id,username:e.username,name:e.name,last_name:e.last_name,link_to_avatar:e.link_to_avatar};t.friendsIncludes(n)||t.getFriends.push(n)}))})))}},I=(n("ea53"),n("6b0d")),F=n.n(I);const T=F()(E,[["render",k],["__scopeId","data-v-1e13af17"]]);e["default"]=T},caad:function(t,e,n){"use strict";var i=n("23e7"),r=n("4d64").includes,a=n("44d2");i({target:"Array",proto:!0},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},d81d:function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").map,a=n("1dde"),c=a("map");i({target:"Array",proto:!0,forced:!c},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},ea53:function(t,e,n){"use strict";n("4cbc")}}]);
//# sourceMappingURL=friends.85ebec73.js.map
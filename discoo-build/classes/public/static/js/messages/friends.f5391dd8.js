(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["messages/friends"],{1422:function(e,t,n){"use strict";n("a82a")},2532:function(e,t,n){"use strict";var c=n("23e7"),r=n("5a34"),a=n("1d80"),o=n("ab13");c({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~String(a(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(e,t,n){var c=n("861d"),r=n("c6b6"),a=n("b622"),o=a("match");e.exports=function(e){var t;return c(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},"5a34":function(e,t,n){var c=n("44e7");e.exports=function(e){if(c(e))throw TypeError("The method doesn't accept regular expressions");return e}},"8aef":function(e,t,n){"use strict";n("4de4"),n("caad"),n("2532"),n("d81d");var c=n("7a23"),r=Object(c["withScopeId"])("data-v-3c631f8d");Object(c["pushScopeId"])("data-v-3c631f8d");var a={class:"content"},o=Object(c["createTextVNode"])(" Quel(s) utilisateur(s) voulez-vous ajouter ? "),i={class:"users"},s={style:{width:"calc(100% - 85px)"}},d={class:"input-user"},u={key:0,id:"friends-list"};Object(c["popScopeId"])();var l=r((function(e,t,n,r,l,f){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:"AddUserInConv",onClick:t[5]||(t[5]=function(){return f.clickEvent&&f.clickEvent.apply(f,arguments)})},[Object(c["createVNode"])("div",a,[o,Object(c["createVNode"])("div",i,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(l.usersToAdd,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{key:e,class:"userInfo"},[Object(c["createVNode"])("div",null,Object(c["toDisplayString"])(null===e||void 0===e?void 0:e.charAt(0).toUpperCase()),1),Object(c["createVNode"])("span",s,Object(c["toDisplayString"])(e),1),Object(c["createVNode"])("button",{class:"close",onClick:function(t){return f.removeUser(e)}},"X",8,["onClick"])])})),128))]),Object(c["createVNode"])("div",d,[Object(c["createVNode"])("input",{type:"text",placeholder:"Entrez un nom d'utilisateur...",autocomplete:"off",list:"friends-list",name:"name_room",onKeypress:t[1]||(t[1]=function(){return f.isEnter&&f.isEnter.apply(f,arguments)})},null,32),n.showAutocomplete?(Object(c["openBlock"])(),Object(c["createBlock"])("datalist",u,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.getFriends.filter((function(e){return!l.users.map((function(e){return e.username})).includes(e.username)})),(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("option",{key:e.id,value:e.username},null,8,["value"])})),128))])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("button",{onClick:t[2]||(t[2]=function(){return f.addUser&&f.addUser.apply(f,arguments)})}," + ")]),Object(c["createVNode"])("button",{class:"submit",onClick:t[3]||(t[3]=function(t){e.$emit("addUsers",l.usersToAdd)})}," Ajouter les utilisateurs séléctionnés ! "),Object(c["createVNode"])("button",{class:"closePopUp",onClick:t[4]||(t[4]=function(t){return e.$emit("desactivatePopUp")})}," X ")])])})),f=n("5530"),p=n("5502"),b=n("bc3a"),v=n.n(b),h={name:"AddUserInConv",props:{showAutocomplete:{required:!0,type:Boolean}},methods:{clickEvent:function(e){"AddUserInConv"===e.target.className&&this.$emit("desactivatePopUp")},addUser:function(){var e=document.querySelector(".input-user > input").value;""===e||this.usersToAdd.includes(e)||this.usersToAdd.push(e),document.querySelector(".input-user > input").value=""},removeUser:function(e){this.usersToAdd=this.usersToAdd.filter((function(t){return t!==e}))},isEnter:function(e){13===e.keyCode&&this.addUser()}},data:function(){return{usersToAdd:[],users:[]}},computed:Object(f["a"])({},Object(p["c"])(["getFriends","getCurrentConv"])),mounted:function(){var e=this;""!==this.getCurrentConv&&v.a.get("/api/rooms/findUserOfRoom?room_id=".concat(this.getCurrentConv)).then((function(t){e.users=t.data}))}};n("a795");h.render=l,h.__scopeId="data-v-3c631f8d";t["a"]=h},"99af":function(e,t,n){"use strict";var c=n("23e7"),r=n("d039"),a=n("e8b5"),o=n("861d"),i=n("7b0b"),s=n("50c4"),d=n("8418"),u=n("65f0"),l=n("1dde"),f=n("b622"),p=n("2d00"),b=f("isConcatSpreadable"),v=9007199254740991,h="Maximum allowed index exceeded",m=p>=51||!r((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),j=l("concat"),O=function(e){if(!o(e))return!1;var t=e[b];return void 0!==t?!!t:a(e)},g=!m||!j;c({target:"Array",proto:!0,forced:g},{concat:function(e){var t,n,c,r,a,o=i(this),l=u(o,0),f=0;for(t=-1,c=arguments.length;t<c;t++)if(a=-1===t?o:arguments[t],O(a)){if(r=s(a.length),f+r>v)throw TypeError(h);for(n=0;n<r;n++,f++)n in a&&d(l,f,a[n])}else{if(f>=v)throw TypeError(h);d(l,f++,a)}return l.length=f,l}})},a434:function(e,t,n){"use strict";var c=n("23e7"),r=n("23cb"),a=n("a691"),o=n("50c4"),i=n("7b0b"),s=n("65f0"),d=n("8418"),u=n("1dde"),l=u("splice"),f=Math.max,p=Math.min,b=9007199254740991,v="Maximum allowed length exceeded";c({target:"Array",proto:!0,forced:!l},{splice:function(e,t){var n,c,u,l,h,m,j=i(this),O=o(j.length),g=r(e,O),k=arguments.length;if(0===k?n=c=0:1===k?(n=0,c=O-g):(n=k-2,c=p(f(a(t),0),O-g)),O+n-c>b)throw TypeError(v);for(u=s(j,c),l=0;l<c;l++)h=g+l,h in j&&d(u,l,j[h]);if(u.length=c,n<c){for(l=g;l<O-c;l++)h=l+c,m=l+n,h in j?j[m]=j[h]:delete j[m];for(l=O;l>O-c+n;l--)delete j[l-1]}else if(n>c)for(l=O-c;l>g;l--)h=l+c-1,m=l+n-1,h in j?j[m]=j[h]:delete j[m];for(l=0;l<n;l++)j[l+g]=arguments[l+2];return j.length=O-c+n,u}})},a795:function(e,t,n){"use strict";n("a7d2")},a7d2:function(e,t,n){},a82a:function(e,t,n){},ab13:function(e,t,n){var c=n("b622"),r=c("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(c){}}return!1}},b0c0:function(e,t,n){var c=n("83ab"),r=n("9bf2").f,a=Function.prototype,o=a.toString,i=/^\s*function ([^ (]*)/,s="name";c&&!(s in a)&&r(a,s,{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(e){return""}}})},c421:function(e,t,n){"use strict";n.r(t);n("b0c0");var c=n("7a23"),r=Object(c["withScopeId"])("data-v-0323011a");Object(c["pushScopeId"])("data-v-0323011a");var a={class:"FriendsList"},o={class:"pannel"},i=Object(c["createVNode"])("span",{style:{"font-weight":"600","font-size":"14px",color:"#f4f4f4",width:"100%",height:"30px","justify-self":"flex-start",display:"flex","align-items":"center"}},"Ajouter un ami",-1),s={key:0,class:"incoming-invite"},d=Object(c["createVNode"])("span",{style:{"margin-bottom":"10px","font-weight":"600","font-size":"14px",color:"#f4f4f4"}},"Ils m'ont demandé en ami :",-1),u={class:"user-image"},l={key:0},f={style:{color:"#f4f4f4",width:"85%","font-size":"19px","font-weight":"600"}},p={class:"current-friends"},b={key:0,style:{"font-weight":"600","font-size":"17px",color:"#f4f4f4"}},v={key:1,style:{"margin-bottom":"10px","font-weight":"600","font-size":"17px",color:"#f4f4f4"}},h={class:"user-image"},m={key:0},j={style:{color:"#f4f4f4",width:"calc(100% - 50px)","font-size":"19px","font-weight":"600"}};Object(c["popScopeId"])();var O=r((function(e,t,n,O,g,k){var y=Object(c["resolveComponent"])("AddUserInConv"),_=Object(c["resolveComponent"])("w-alert");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])("div",a,[Object(c["createVNode"])("div",o,[i,Object(c["createVNode"])("button",{onClick:t[1]||(t[1]=function(e){return g.showAddFriends=!0})},"+"),g.showAddFriends?(Object(c["openBlock"])(),Object(c["createBlock"])(y,{key:0,onDesactivatePopUp:t[2]||(t[2]=function(e){return g.showAddFriends=!1}),onAddUsers:k.addUsers,"show-autocomplete":!1},null,8,["onAddUsers"])):Object(c["createCommentVNode"])("",!0)]),g.invite.length>0?(Object(c["openBlock"])(),Object(c["createBlock"])("div",s,[d,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(g.invite,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:"user",key:e},[Object(c["createVNode"])("div",u,[null===e.link_to_avatar?(Object(c["openBlock"])(),Object(c["createBlock"])("span",l,Object(c["toDisplayString"])(e.name.charAt(0).toUpperCase()),1)):(Object(c["openBlock"])(),Object(c["createBlock"])("img",{key:1,src:e.link_to_avatar,alt:""},null,8,["src"]))]),Object(c["createVNode"])("span",f,Object(c["toDisplayString"])(e.name),1),Object(c["createVNode"])("button",{class:"accept-invite",onClick:function(t){return k.acceptInvite(e.id)}},"✅",8,["onClick"]),Object(c["createVNode"])("button",{class:"refuse-invite",onClick:function(t){return k.refuseInvite(e.id)}},"❌",8,["onClick"])])})),128))])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("div",p,[0===e.getFriends.length?(Object(c["openBlock"])(),Object(c["createBlock"])("span",b,"Ajoute des amis pour les voir ici !")):(Object(c["openBlock"])(),Object(c["createBlock"])("span",v,"Vos amis :")),(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.getFriends,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:"user",key:e},[Object(c["createVNode"])("div",h,[null===e.link_to_avatar?(Object(c["openBlock"])(),Object(c["createBlock"])("span",m,Object(c["toDisplayString"])(e.name.charAt(0).toUpperCase()),1)):(Object(c["openBlock"])(),Object(c["createBlock"])("img",{key:1,src:e.link_to_avatar,alt:""},null,8,["src"]))]),Object(c["createVNode"])("span",j,Object(c["toDisplayString"])(e.name),1)])})),128))])]),g.showAlert?(Object(c["openBlock"])(),Object(c["createBlock"])(_,{key:0,class:"error-alert",success:"",plain:""},{default:r((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(g.alertText),1)]})),_:1})):Object(c["createCommentVNode"])("",!0)],64)})),g=n("5530"),k=(n("159b"),n("99af"),n("a434"),n("caad"),n("2532"),n("5502")),y=n("bc3a"),_=n.n(y),B=n("8aef"),w={name:"FriendsList",components:{AddUserInConv:B["a"]},data:function(){return{invite:[],alertText:"",showAlert:!1,showAddFriends:!1}},methods:Object(g["a"])({addUsers:function(e){var t=this;e.forEach((function(e){_.a.get("/api/users/findByUserName?username=".concat(e)).then((function(e){e.data&&e.data.id!==t.getUser.id&&_.a.post("/api/friendships/inviteMembers?user_id=".concat(t.getUser.id),{friendships:[e.data.id]}).then((function(){t.alertText="Utilisateur(s) ajouté(s)",t.showAlert=!0,setTimeout((function(){t.showAlert=!1}),4e3)}))}))})),this.showAddFriends=!1},acceptInvite:function(e){var t=this;_.a.put("/api/friendships/acceptInvitation?sender_id=".concat(e,"&receiver_id=").concat(this.getUser.id)).then((function(){_.a.get("/api/users/infos?user_id=".concat(e)).then((function(e){var n={id:e.data.id,username:e.data.username,name:e.data.name,link_to_avatar:e.data.link_to_avatar},c=0;t.invite.forEach((function(e){e.id!==n.id?c++:t.invite.splice(c,1)})),t.friendsIncludes(n)||t.getFriends.push(n)}))})).catch((function(e){console.log(e)}))},refuseInvite:function(e){var t=this;_.a.delete("/api/friendships/refuseInvitation?sender_id=".concat(e,"&receiver_id=").concat(this.getUser.id)).then((function(){_.a.get("/api/users/infos?user_id=".concat(e)).then((function(e){var n={id:e.data.id,username:e.data.username,name:e.data.name,link_to_avatar:e.data.link_to_avatar},c=0;t.invite.forEach((function(e){e.id!==n.id?c++:t.invite.splice(c,1)}))}))})).catch((function(e){console.log(e)}))},friendsIncludes:function(e){var t=!1;return this.getFriends.forEach((function(n){n.id===e.id&&n.link_to_avatar===e.link_to_avatar&&n.name===e.name&&n.username===e.username&&(t=!0)})),t}},Object(k["b"])(["setFriends"])),computed:Object(g["a"])({},Object(k["c"])(["getUser","getFriends","getCurrentConv"])),mounted:function(){var e=this;JSON.stringify(this.getUser)!==JSON.stringify({})&&(_.a.get("/api/friendships/getAllInvitations?user_id=".concat(this.getUser.id)).then((function(t){t.data.forEach((function(t){t.status||_.a.get("/api/users/infos?user_id=".concat(t.sender_id)).then((function(t){var n={id:t.data.id,username:t.data.username,name:t.data.name,link_to_avatar:t.data.link_to_avatar};e.invite.includes(n)||e.invite.push(n)}))}))})),_.a.get("/api/users/seeAllFriends?user_id=".concat(this.getUser.id)).then((function(t){e.setFriends([]),t.data.forEach((function(t){var n={id:t.id,username:t.username,name:t.name,last_name:t.last_name,link_to_avatar:t.link_to_avatar};e.friendsIncludes(n)||e.getFriends.push(n)}))})))}};n("1422");w.render=O,w.__scopeId="data-v-0323011a";t["default"]=w},caad:function(e,t,n){"use strict";var c=n("23e7"),r=n("4d64").includes,a=n("44d2");c({target:"Array",proto:!0},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},d81d:function(e,t,n){"use strict";var c=n("23e7"),r=n("b727").map,a=n("1dde"),o=a("map");c({target:"Array",proto:!0,forced:!o},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=friends.f5391dd8.js.map
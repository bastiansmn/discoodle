(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["messages"],{"20a3":function(e,t,o){},"3a60":function(e,t,o){},"45aa":function(e,t,o){"use strict";o("20a3")},eaad:function(e,t,o){"use strict";o.r(t);o("99af");var n=o("7a23"),c=Object(n["withScopeId"])("data-v-16f52ff4");Object(n["pushScopeId"])("data-v-16f52ff4");var i={key:0,class:"Messages"},r={class:"left-pannel"},s={class:"settings-box"},a=Object(n["createVNode"])("img",{src:"../assets/settings.png",alt:"Settings",style:{height:"100%",width:"100%"}},null,-1),d=Object(n["createVNode"])("img",{src:"../assets/arrow.svg",alt:"",style:{width:"70%"}},null,-1),l={class:"convs-list"},u={class:"link-content"},m={class:"user-logo"},p={key:1,src:"../assets/group.svg",alt:"",style:{width:"65%"}},b={key:2},f={class:"conv-name"},v=Object(n["createVNode"])("img",{src:"../assets/pen.svg",alt:"",style:{width:"60%"}},null,-1),g=Object(n["createVNode"])("span",{style:{"margin-bottom":"10px","font-size":"19px","font-weight":"600",color:"#454150"}},"Modifier la discussion :",-1),O=Object(n["createTextVNode"])("Modifier le nom de la room."),j={style:{display:"flex","flex-direction":"column","justify-content":"space-between","margin-top":"10px"}},h={class:"right-pannel"};Object(n["popScopeId"])();var k=c((function(e,t,o,k,y,C){var w=Object(n["resolveComponent"])("AddConversation"),_=Object(n["resolveComponent"])("router-link"),N=Object(n["resolveComponent"])("w-input"),V=Object(n["resolveComponent"])("w-dialog"),R=Object(n["resolveComponent"])("router-view"),U=Object(n["resolveComponent"])("Account");return JSON.stringify(e.getUser)!==JSON.stringify({})?(Object(n["openBlock"])(),Object(n["createBlock"])("div",i,[Object(n["createVNode"])("div",r,[Object(n["createVNode"])("div",s,[Object(n["createVNode"])("div",null,[Object(n["createVNode"])("div",{class:"add-conversation",onClick:t[1]||(t[1]=function(e){return y.showPopUp=!0})}," + "),y.showPopUp?(Object(n["openBlock"])(),Object(n["createBlock"])(w,{key:0,onGroupAdded:C.addNewRoom,onDesactivatePopUp:t[2]||(t[2]=function(e){return y.showPopUp=!1})},null,8,["onGroupAdded"])):Object(n["createCommentVNode"])("",!0),JSON.stringify(e.$route.params)===JSON.stringify({})?(Object(n["openBlock"])(),Object(n["createBlock"])("a",{key:1,class:"settings",style:y.modifying?{animation:"10s cubic-bezier(.11, 0, .09, 1) settingsRoll"}:{},href:"#/messages",onClick:t[3]||(t[3]=function(e){y.modifying=!y.modifying})},[a],4)):(Object(n["openBlock"])(),Object(n["createBlock"])(_,{key:2,to:"/messages",style:{width:"40px",height:"40px",display:"flex","align-items":"center","justify-content":"center","background-color":"transparent !important"}},{default:c((function(){return[d]})),_:1}))])]),Object(n["createVNode"])("div",l,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(y.convList,(function(o){return Object(n["openBlock"])(),Object(n["createBlock"])(_,{key:o.room_id,to:y.modifying?"/messages":"/messages/".concat(o.room_id,"?name=").concat(o.room_name),onClick:function(t){return y.modifying?"":e.setConvUUID(o.room_id)},style:y.modifying?{backgroundColor:"#15131c !important"}:{}},{default:c((function(){return[Object(n["createVNode"])("div",u,[Object(n["createVNode"])("div",m,[null!==o.link_picture?(Object(n["openBlock"])(),Object(n["createBlock"])("img",{key:0,src:o.link_picture,alt:""},null,8,["src"])):o.users.length>2?(Object(n["openBlock"])(),Object(n["createBlock"])("img",p)):(Object(n["openBlock"])(),Object(n["createBlock"])("span",b,Object(n["toDisplayString"])(o.room_name.charAt(0).toUpperCase()),1))]),Object(n["createVNode"])("div",f,Object(n["toDisplayString"])(o.room_name),1),y.modifying?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,class:"edit-button",onClick:function(t){y.editRoom.show=!y.editRoom.show,y.new_name="",e.setConvUUID(o.room_id)}},[v],8,["onClick"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(V,{modelValue:y.editRoom.show,"onUpdate:modelValue":t[8]||(t[8]=function(e){return y.editRoom.show=e}),fullscreen:y.editRoom.fullscreen,width:y.editRoom.width,persistent:y.editRoom.persistent,"persistent-no-animation":y.editRoom.persistentNoAnimation},{default:c((function(){return[Object(n["createVNode"])("div",null,[g,Object(n["createVNode"])(N,{color:"primary-dark2",minlength:1,modelValue:y.new_name,"onUpdate:modelValue":t[4]||(t[4]=function(e){return y.new_name=e})},{default:c((function(){return[O]})),_:1},8,["modelValue"]),Object(n["createVNode"])("div",j,[Object(n["createVNode"])("button",{class:"submit",onClick:t[5]||(t[5]=function(){return C.deleteRoom&&C.deleteRoom.apply(C,arguments)}),style:{"background-color":"#E85C5C !important"}}," Supprimer "),Object(n["createVNode"])("button",{class:"submit",onClick:t[6]||(t[6]=function(){return C.exitRoom&&C.exitRoom.apply(C,arguments)}),style:{"background-color":"#E85C5C !important"}}," Quitter la conversation "),Object(n["createVNode"])("button",{class:"submit",onClick:t[7]||(t[7]=function(){return C.roomEdit&&C.roomEdit.apply(C,arguments)})}," Enregistrer ")])])]})),_:1},8,["modelValue","fullscreen","width","persistent","persistent-no-animation"])])]})),_:2},1032,["to","onClick","style"])})),128))])]),Object(n["createVNode"])("div",h,[Object(n["createVNode"])(R,{onUserChanged:C.getRoomsFromDB},null,8,["onUserChanged"])])])):(Object(n["openBlock"])(),Object(n["createBlock"])(U,{key:1,onLogSuccess:C.getRoomsFromDB},null,8,["onLogSuccess"]))})),y=o("5530"),C=(o("d81d"),o("4de4"),o("5502")),w=o("bc3a"),_=o.n(w),N=o("77be"),V=Object(n["withScopeId"])("data-v-99bf6c72");Object(n["pushScopeId"])("data-v-99bf6c72");var R={class:"add-conv-box"},U=Object(n["createTextVNode"])(" CrÃ©er une nouvelle discussion ici : ");Object(n["popScopeId"])();var B=V((function(e,t,o,c,i,r){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:"AddConversation",onClick:t[4]||(t[4]=function(){return r.clickEvent&&r.clickEvent.apply(r,arguments)})},[Object(n["createVNode"])("div",R,[U,Object(n["createVNode"])("div",null,[Object(n["createVNode"])("input",{type:"text",placeholder:"Entrez un nom de conversation...",autocomplete:"off",name:"name_room",onKeypress:t[1]||(t[1]=function(){return r.isEnter&&r.isEnter.apply(r,arguments)})},null,32),Object(n["createVNode"])("button",{onClick:t[2]||(t[2]=function(){return r.isEnter&&r.isEnter.apply(r,arguments)})}," + ")]),Object(n["createVNode"])("button",{class:"closePopUp",onClick:t[3]||(t[3]=function(t){return e.$emit("desactivatePopUp")})}," X ")])])})),S={name:"AddConversation",computed:Object(y["a"])({},Object(C["c"])(["getUser"])),methods:{isEnter:function(e){var t=document.querySelector("input[name=name_room]").value;(13===e.keyCode&&""!==t.value||"click"===e.type)&&this.addRoom(name)},clickEvent:function(e){"AddConversation"===e.target.className&&this.$emit("desactivatePopUp")},addRoom:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.querySelector(".add-conv-box > div > input").value;_.a.post("/api/rooms/addNewRoom",{room_name:o,room_members:[this.getUser.id],link_picture:null}).then((function(e){t.$emit("groupAdded",e.data),t.$emit("desactivatePopUp")})).catch((function(e){console.log(e.response),t.$emit("desactivatePopUp")}))}}};o("f90d");S.render=B,S.__scopeId="data-v-99bf6c72";var x=S,E={name:"Messages",components:{AddConversation:x,Account:N["default"]},computed:Object(y["a"])({},Object(C["c"])(["getColors","getUser","getCurrentConv"])),methods:Object(y["a"])(Object(y["a"])({},Object(C["b"])(["setConvUUID"])),{},{getRoomsFromDB:function(){var e=this;_.a.get("/api/users/seeAllRooms?user_id=".concat(this.getUser.id)).then((function(t){e.convList=t.data}))},addNewRoom:function(e){this.convList.unshift({link_picture:e.link_picture,room_name:e.room_name,room_id:e.room_id,users:e.users})},roomEdit:function(){var e=this;if(""!==this.new_name){var t=this.getCurrentConv;_.a.put("/api/rooms/renameRoom?room_id=".concat(t,"&new_name=").concat(this.new_name)).then((function(){e.convList.filter((function(e){return e.room_id===t})).map((function(t){return t.room_name=e.new_name})),e.editRoom.show=!1,e.modifying=!1}))}},deleteRoom:function(){var e=this,t=this.getCurrentConv;_.a.delete("/api/rooms/removeRoom?room_id=".concat(t)).then((function(){e.convList=e.convList.filter((function(e){return e.room_id!==t})),e.editRoom.show=!1,e.modifying=!1}))},exitRoom:function(){var e=this,t=this.getCurrentConv;_.a.delete("/api/rooms/removeMember?room_id=".concat(t,"&user_id=").concat(this.getUser.id)).then((function(){e.convList=e.convList.filter((function(e){return e.room_id!==t})),e.editRoom.show=!1,e.modifying=!1}))}}),data:function(){return{convList:[],displayConversationPopUp:!1,showPopUp:!1,modifying:!1,editRoom:{show:!1,fullscreen:!1,persistent:!1,persistentNoAnimation:!1,width:300},new_name:""}},mounted:function(){JSON.stringify(this.getUser)!==JSON.stringify({})&&this.getRoomsFromDB()}};o("45aa");E.render=k,E.__scopeId="data-v-16f52ff4";t["default"]=E},f90d:function(e,t,o){"use strict";o("3a60")}}]);
//# sourceMappingURL=messages.c663a14d.js.map
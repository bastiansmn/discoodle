(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["messages/friends"],{1422:function(e,t,n){"use strict";n("a82a")},2532:function(e,t,n){"use strict";var i=n("23e7"),r=n("e330"),a=n("5a34"),c=n("1d80"),s=n("577e"),o=n("ab13"),u=r("".indexOf);i({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~u(s(c(this)),s(a(e)),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(e,t,n){var i=n("861d"),r=n("c6b6"),a=n("b622"),c=a("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[c])?!!t:"RegExp"==r(e))}},"5a34":function(e,t,n){var i=n("da84"),r=n("44e7"),a=i.TypeError;e.exports=function(e){if(r(e))throw a("The method doesn't accept regular expressions");return e}},"8aef":function(e,t,n){"use strict";n("4de4"),n("d3b7"),n("caad"),n("2532"),n("d81d");var i=n("7a23"),r={class:"content"},a=Object(i["l"])(" Quel(s) utilisateur(s) voulez-vous ajouter ? "),c={class:"users"},s={style:{width:"calc(100% - 85px)"}},o=["onClick"],u={class:"input-user"},d={key:0,id:"friends-list"},l=["value"];function f(e,t,n,f,b,p){return Object(i["y"])(),Object(i["i"])("div",{class:"AddUserInConv",onClick:t[4]||(t[4]=function(){return p.clickEvent&&p.clickEvent.apply(p,arguments)})},[Object(i["j"])("div",r,[a,Object(i["j"])("div",c,[(Object(i["y"])(!0),Object(i["i"])(i["a"],null,Object(i["E"])(b.usersToAdd,(function(e){return Object(i["y"])(),Object(i["i"])("div",{key:e,class:"userInfo"},[Object(i["j"])("div",null,Object(i["K"])(null===e||void 0===e?void 0:e.charAt(0).toUpperCase()),1),Object(i["j"])("span",s,Object(i["K"])(e),1),Object(i["j"])("button",{class:"close",onClick:function(t){return p.removeUser(e)}},"X",8,o)])})),128))]),Object(i["j"])("div",u,[Object(i["j"])("input",{type:"text",placeholder:"Entrez un nom d'utilisateur...",autocomplete:"off",list:"friends-list",name:"name_room",onKeypress:t[0]||(t[0]=function(){return p.isEnter&&p.isEnter.apply(p,arguments)})},null,32),n.showAutocomplete?(Object(i["y"])(),Object(i["i"])("datalist",d,[(Object(i["y"])(!0),Object(i["i"])(i["a"],null,Object(i["E"])(e.getFriends.filter((function(e){return!b.users.map((function(e){return e.username})).includes(e.username)})),(function(e){return Object(i["y"])(),Object(i["i"])("option",{key:e.id,value:e.username},null,8,l)})),128))])):Object(i["h"])("",!0),Object(i["j"])("button",{onClick:t[1]||(t[1]=function(){return p.addUser&&p.addUser.apply(p,arguments)})}," + ")]),Object(i["j"])("button",{class:"submit",onClick:t[2]||(t[2]=function(t){e.$emit("addUsers",b.usersToAdd)})}," Ajouter les utilisateurs séléctionnés ! "),Object(i["j"])("button",{class:"closePopUp",onClick:t[3]||(t[3]=function(t){return e.$emit("desactivatePopUp")})}," X ")])])}var b=n("5530"),p=n("5502"),v=n("bc3a"),j=n.n(v),h={name:"AddUserInConv",props:{showAutocomplete:{required:!0,type:Boolean}},methods:{clickEvent:function(e){"AddUserInConv"===e.target.className&&this.$emit("desactivatePopUp")},addUser:function(){var e=document.querySelector(".input-user > input").value;""===e||this.usersToAdd.includes(e)||this.usersToAdd.push(e),document.querySelector(".input-user > input").value=""},removeUser:function(e){this.usersToAdd=this.usersToAdd.filter((function(t){return t!==e}))},isEnter:function(e){13===e.keyCode&&this.addUser()}},data:function(){return{usersToAdd:[],users:[]}},computed:Object(b["a"])({},Object(p["c"])(["getFriends","getCurrentConv"])),mounted:function(){var e=this;""!==this.getCurrentConv&&j.a.get("/api/rooms/findUserOfRoom?room_id=".concat(this.getCurrentConv)).then((function(t){e.users=t.data}))}},O=(n("a795"),n("6b0d")),m=n.n(O);const g=m()(h,[["render",f],["__scopeId","data-v-3c631f8d"]]);t["a"]=g},"99af":function(e,t,n){"use strict";var i=n("23e7"),r=n("da84"),a=n("d039"),c=n("e8b5"),s=n("861d"),o=n("7b0b"),u=n("07fa"),d=n("8418"),l=n("65f0"),f=n("1dde"),b=n("b622"),p=n("2d00"),v=b("isConcatSpreadable"),j=9007199254740991,h="Maximum allowed index exceeded",O=r.TypeError,m=p>=51||!a((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),g=f("concat"),y=function(e){if(!s(e))return!1;var t=e[v];return void 0!==t?!!t:c(e)},_=!m||!g;i({target:"Array",proto:!0,forced:_},{concat:function(e){var t,n,i,r,a,c=o(this),s=l(c,0),f=0;for(t=-1,i=arguments.length;t<i;t++)if(a=-1===t?c:arguments[t],y(a)){if(r=u(a),f+r>j)throw O(h);for(n=0;n<r;n++,f++)n in a&&d(s,f,a[n])}else{if(f>=j)throw O(h);d(s,f++,a)}return s.length=f,s}})},a434:function(e,t,n){"use strict";var i=n("23e7"),r=n("da84"),a=n("23cb"),c=n("5926"),s=n("07fa"),o=n("7b0b"),u=n("65f0"),d=n("8418"),l=n("1dde"),f=l("splice"),b=r.TypeError,p=Math.max,v=Math.min,j=9007199254740991,h="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var n,i,r,l,f,O,m=o(this),g=s(m),y=a(e,g),_=arguments.length;if(0===_?n=i=0:1===_?(n=0,i=g-y):(n=_-2,i=v(p(c(t),0),g-y)),g+n-i>j)throw b(h);for(r=u(m,i),l=0;l<i;l++)f=y+l,f in m&&d(r,l,m[f]);if(r.length=i,n<i){for(l=y;l<g-i;l++)f=l+i,O=l+n,f in m?m[O]=m[f]:delete m[O];for(l=g;l>g-i+n;l--)delete m[l-1]}else if(n>i)for(l=g-i;l>y;l--)f=l+i-1,O=l+n-1,f in m?m[O]=m[f]:delete m[O];for(l=0;l<n;l++)m[l+y]=arguments[l+2];return m.length=g-i+n,r}})},a795:function(e,t,n){"use strict";n("a7d2")},a7d2:function(e,t,n){},a82a:function(e,t,n){},ab13:function(e,t,n){var i=n("b622"),r=i("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(i){}}return!1}},b0c0:function(e,t,n){var i=n("83ab"),r=n("5e77").EXISTS,a=n("e330"),c=n("9bf2").f,s=Function.prototype,o=a(s.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=a(u.exec),l="name";i&&!r&&c(s,l,{configurable:!0,get:function(){try{return d(u,o(this))[1]}catch(e){return""}}})},c421:function(e,t,n){"use strict";n.r(t);n("b0c0");var i=n("7a23"),r=function(e){return Object(i["B"])("data-v-0323011a"),e=e(),Object(i["z"])(),e},a={class:"FriendsList"},c={class:"pannel"},s=r((function(){return Object(i["j"])("span",{style:{"font-weight":"600","font-size":"14px",color:"#f4f4f4",width:"100%",height:"30px","justify-self":"flex-start",display:"flex","align-items":"center"}},"Ajouter un ami",-1)})),o={key:0,class:"incoming-invite"},u=r((function(){return Object(i["j"])("span",{style:{"margin-bottom":"10px","font-weight":"600","font-size":"14px",color:"#f4f4f4"}},"Ils m'ont demandé en ami :",-1)})),d={class:"user-image"},l={key:0},f=["src"],b={style:{color:"#f4f4f4",width:"85%","font-size":"19px","font-weight":"600"}},p=["onClick"],v=["onClick"],j={class:"current-friends"},h={key:0,style:{"font-weight":"600","font-size":"17px",color:"#f4f4f4"}},O={key:1,style:{"margin-bottom":"10px","font-weight":"600","font-size":"17px",color:"#f4f4f4"}},m={class:"user-image"},g={key:0},y=["src"],_={style:{color:"#f4f4f4",width:"calc(100% - 50px)","font-size":"19px","font-weight":"600"}};function k(e,t,n,r,k,A){var w=Object(i["G"])("AddUserInConv"),U=Object(i["G"])("w-alert");return Object(i["y"])(),Object(i["i"])(i["a"],null,[Object(i["j"])("div",a,[Object(i["j"])("div",c,[s,Object(i["j"])("button",{onClick:t[0]||(t[0]=function(e){return k.showAddFriends=!0})},"+"),k.showAddFriends?(Object(i["y"])(),Object(i["g"])(w,{key:0,onDesactivatePopUp:t[1]||(t[1]=function(e){return k.showAddFriends=!1}),onAddUsers:A.addUsers,"show-autocomplete":!1},null,8,["onAddUsers"])):Object(i["h"])("",!0)]),k.invite.length>0?(Object(i["y"])(),Object(i["i"])("div",o,[u,(Object(i["y"])(!0),Object(i["i"])(i["a"],null,Object(i["E"])(k.invite,(function(e){return Object(i["y"])(),Object(i["i"])("div",{class:"user",key:e},[Object(i["j"])("div",d,[null===e.link_to_avatar?(Object(i["y"])(),Object(i["i"])("span",l,Object(i["K"])(e.name.charAt(0).toUpperCase()),1)):(Object(i["y"])(),Object(i["i"])("img",{key:1,src:e.link_to_avatar,alt:""},null,8,f))]),Object(i["j"])("span",b,Object(i["K"])(e.name),1),Object(i["j"])("button",{class:"accept-invite",onClick:function(t){return A.acceptInvite(e.id)}},"✅",8,p),Object(i["j"])("button",{class:"refuse-invite",onClick:function(t){return A.refuseInvite(e.id)}},"❌",8,v)])})),128))])):Object(i["h"])("",!0),Object(i["j"])("div",j,[0===e.getFriends.length?(Object(i["y"])(),Object(i["i"])("span",h,"Ajoute des amis pour les voir ici !")):(Object(i["y"])(),Object(i["i"])("span",O,"Vos amis :")),(Object(i["y"])(!0),Object(i["i"])(i["a"],null,Object(i["E"])(e.getFriends,(function(e){return Object(i["y"])(),Object(i["i"])("div",{class:"user",key:e},[Object(i["j"])("div",m,[null===e.link_to_avatar?(Object(i["y"])(),Object(i["i"])("span",g,Object(i["K"])(e.name.charAt(0).toUpperCase()),1)):(Object(i["y"])(),Object(i["i"])("img",{key:1,src:e.link_to_avatar,alt:""},null,8,y))]),Object(i["j"])("span",_,Object(i["K"])(e.name),1)])})),128))])]),k.showAlert?(Object(i["y"])(),Object(i["g"])(U,{key:0,class:"error-alert",success:"",plain:""},{default:Object(i["Q"])((function(){return[Object(i["l"])(Object(i["K"])(k.alertText),1)]})),_:1})):Object(i["h"])("",!0)],64)}var A=n("5530"),w=(n("d3b7"),n("159b"),n("99af"),n("a434"),n("e9c4"),n("caad"),n("2532"),n("5502")),U=n("bc3a"),x=n.n(U),C=n("8aef"),F={name:"FriendsList",components:{AddUserInConv:C["a"]},data:function(){return{invite:[],alertText:"",showAlert:!1,showAddFriends:!1}},methods:Object(A["a"])({addUsers:function(e){var t=this;e.forEach((function(e){x.a.get("/api/users/findByUserName?username=".concat(e)).then((function(e){e.data&&e.data.id!==t.getUser.id&&x.a.post("/api/friendships/inviteMembers?user_id=".concat(t.getUser.id),{friendships:[e.data.id]}).then((function(){t.alertText="Utilisateur(s) ajouté(s)",t.showAlert=!0,setTimeout((function(){t.showAlert=!1}),4e3)}))}))})),this.showAddFriends=!1},acceptInvite:function(e){var t=this;x.a.put("/api/friendships/acceptInvitation?sender_id=".concat(e,"&receiver_id=").concat(this.getUser.id)).then((function(){x.a.get("/api/users/infos?user_id=".concat(e)).then((function(e){var n={id:e.data.id,username:e.data.username,name:e.data.name,link_to_avatar:e.data.link_to_avatar},i=0;t.invite.forEach((function(e){e.id!==n.id?i++:t.invite.splice(i,1)})),t.friendsIncludes(n)||t.getFriends.push(n)}))})).catch((function(e){console.log(e)}))},refuseInvite:function(e){var t=this;x.a.delete("/api/friendships/refuseInvitation?sender_id=".concat(e,"&receiver_id=").concat(this.getUser.id)).then((function(){x.a.get("/api/users/infos?user_id=".concat(e)).then((function(e){var n={id:e.data.id,username:e.data.username,name:e.data.name,link_to_avatar:e.data.link_to_avatar},i=0;t.invite.forEach((function(e){e.id!==n.id?i++:t.invite.splice(i,1)}))}))})).catch((function(e){console.log(e)}))},friendsIncludes:function(e){var t=!1;return this.getFriends.forEach((function(n){n.id===e.id&&n.link_to_avatar===e.link_to_avatar&&n.name===e.name&&n.username===e.username&&(t=!0)})),t}},Object(w["b"])(["setFriends"])),computed:Object(A["a"])({},Object(w["c"])(["getUser","getFriends","getCurrentConv"])),mounted:function(){var e=this;JSON.stringify(this.getUser)!==JSON.stringify({})&&(x.a.get("/api/friendships/getAllInvitations?user_id=".concat(this.getUser.id)).then((function(t){t.data.forEach((function(t){t.status||x.a.get("/api/users/infos?user_id=".concat(t.sender_id)).then((function(t){var n={id:t.data.id,username:t.data.username,name:t.data.name,link_to_avatar:t.data.link_to_avatar};e.invite.includes(n)||e.invite.push(n)}))}))})),x.a.get("/api/users/seeAllFriends?user_id=".concat(this.getUser.id)).then((function(t){e.setFriends([]),t.data.forEach((function(t){var n={id:t.id,username:t.username,name:t.name,last_name:t.last_name,link_to_avatar:t.link_to_avatar};e.friendsIncludes(n)||e.getFriends.push(n)}))})))}},E=(n("1422"),n("6b0d")),I=n.n(E);const T=I()(F,[["render",k],["__scopeId","data-v-0323011a"]]);t["default"]=T},caad:function(e,t,n){"use strict";var i=n("23e7"),r=n("4d64").includes,a=n("44d2");i({target:"Array",proto:!0},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},d81d:function(e,t,n){"use strict";var i=n("23e7"),r=n("b727").map,a=n("1dde"),c=a("map");i({target:"Array",proto:!0,forced:!c},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},e9c4:function(e,t,n){var i=n("23e7"),r=n("da84"),a=n("d066"),c=n("2ba4"),s=n("e330"),o=n("d039"),u=r.Array,d=a("JSON","stringify"),l=s(/./.exec),f=s("".charAt),b=s("".charCodeAt),p=s("".replace),v=s(1..toString),j=/[\uD800-\uDFFF]/g,h=/^[\uD800-\uDBFF]$/,O=/^[\uDC00-\uDFFF]$/,m=function(e,t,n){var i=f(n,t-1),r=f(n,t+1);return l(h,e)&&!l(O,r)||l(O,e)&&!l(h,i)?"\\u"+v(b(e,0),16):e},g=o((function(){return'"\\udf06\\ud834"'!==d("\udf06\ud834")||'"\\udead"'!==d("\udead")}));d&&i({target:"JSON",stat:!0,forced:g},{stringify:function(e,t,n){for(var i=0,r=arguments.length,a=u(r);i<r;i++)a[i]=arguments[i];var s=c(d,null,a);return"string"==typeof s?p(s,j,m):s}})}}]);
//# sourceMappingURL=friends.01390bbf.js.map